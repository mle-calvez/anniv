<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Validation</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="container">
<h2 id="resultat"></h2>
<p id="message"></p>
</div>


<script src="data.js"></script>
<script>
const params = new URLSearchParams(window.location.search);
const etapeId = parseInt(params.get("etape"), 10);
const rep = params.get("rep");


const etapeMax = parseInt(localStorage.getItem("etape_max") || "1", 10);


const resultat = document.getElementById("resultat");
const message = document.getElementById("message");


if (!etapes[etapeId] || etapeId > etapeMax) {
resultat.innerText = "â›” QR non valide";
message.innerHTML = `
Ce QR ne correspond pas Ã  ton avancÃ©e.<br>
<button class="btn" onclick="window.history.back()">ğŸ”™ Retour Ã  l'Ã©tape</button>
`;
} else if (rep === etapes[etapeId].reponse) {
if (etapes[etapeId].suivante) {
localStorage.setItem("etape_max", etapes[etapeId].suivante.toString());
resultat.innerText = "âœ… Bonne rÃ©ponse !";
message.innerHTML = `<a class="btn" href="etape.html?id=${etapes[etapeId].suivante}">Ã‰tape suivante</a>`;
} else {
resultat.innerText = "ğŸ‰ FÃ©licitations !";
message.innerText = "Tu as terminÃ© le jeu.";
}
} else {
resultat.innerText = "âŒ Mauvaise rÃ©ponse";
message.innerHTML = `
Ce nâ€™est pas le bon QR code.<br>
<button class="btn" onclick="window.history.back()">ğŸ”™ Retour Ã  l'Ã©tape</button>
`;
}
</script>
</body>
</html>